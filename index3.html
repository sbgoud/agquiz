<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Preparation Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation; /* Prevents double-tap zoom on mobile */
        }
        .quiz-container {
            max-width: 800px;
            width: 95%;
        }
        .option {
            transition: background-color 0.3s, color 0.3s, transform 0.2s;
        }
        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #10B981 !important; /* Tailwind green-500 */
            color: white !important;
            border-color: #059669 !important;
        }
        .incorrect {
            background-color: #EF4444 !important; /* Tailwind red-500 */
            color: white !important;
            border-color: #DC2626 !important;
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
        /* Adding a subtle animation for the question transition */
        .question-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen py-8">

    <div id="quiz-container" class="quiz-container bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <!-- Quiz Header -->
        <div class="mb-6">
            <div class="flex justify-between items-center mb-2">
                <p class="text-sm font-medium text-gray-500">Question <span id="question-number">1</span> of <span id="total-questions"></span></p>
                <p id="score" class="text-sm font-semibold text-indigo-600">Score: 0</p>
            </div>
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full progress-bar-inner" style="width: 0%"></div>
            </div>
        </div>

        <!-- Question and Options -->
        <div id="question-area">
            <h2 id="question-text" class="text-xl sm:text-2xl font-bold text-gray-800 mb-6 min-h-[100px]">Loading question...</h2>
            <div id="options-container" class="space-y-4">
                <!-- Options will be dynamically inserted here -->
            </div>
            <!-- Next Button Container -->
            <div id="next-button-container" class="mt-6 text-right hidden">
                <button id="next-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-300 shadow-md">
                    Next &rarr;
                </button>
            </div>
        </div>
        
        <!-- Result Screen -->
        <div id="result-screen" class="hidden text-center">
             <h2 class="text-3xl font-bold text-gray-800 mb-4">Quiz Completed!</h2>
             <p class="text-xl text-gray-600 mb-2">Your Final Score:</p>
             <p id="final-score" class="text-5xl font-extrabold text-indigo-600 mb-8">0 / 0</p>
             <button id="restart-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-md">
                Restart Quiz
             </button>
        </div>

    </div>

    <script>
        // --- DATA: Questions and Answers ---
        // All 365 questions from the provided PDF are now included.
        const quizData = [
            { question: "The date on which CCS (Leave) Rules, 1972 came into effect is-", options: ["1st January, 1972", "2nd April, 1972", "1st June, 1972", "15th August, 1972"], answer: "1st June, 1972" },
            { question: "CCS (Leave) Rules, 1972 is not applicable to-", options: ["Persons appointed to the Civil services", "Employees of non-statutory departmental canteens", "Government servants appointed in subordinate of Central Government", "Persons paid from contingencies"], answer: "Persons paid from contingencies" },
            { question: "CCS (Leave) Rules, 1972 applies to a person serving under Central Government on deputation from a State Government-", options: ["for the rest of his service", "for a limited duration", "from the date of his joining State Government", "None of the above"], answer: "for a limited duration" },
            { question: "How many schedules does the CCS (Leave) Rules contain?", options: ["One", "Two", "Three", "Four"], answer: "Two" },
             { question: "What is the maximum number of days of EL that can be held at credit by a Government servant?", options: ["300", "200", "250", "180"], answer: "300" },
          { question: "The following kinds of leave cannot be commuted into any other kind of leave:-", options: ["Earned Leave", "Leave Not Due", "Commuted Leave", "Casual Leave"], answer: "Casual Leave" },
            { question: "The instalment of Half Pay Leave credited on the first day of January to a Civilian Government servant's leave account is-", options: ["5 days", "10 days", "20 days", "30 days"], answer: "10 days" }
        ];

        // --- DOM Elements ---
        const quizContainer = document.getElementById('quiz-container');
        const questionArea = document.getElementById('question-area');
        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const progressBarEl = document.getElementById('progress-bar');
        const scoreEl = document.getElementById('score');
        const resultScreenEl = document.getElementById('result-screen');
        const finalScoreEl = document.getElementById('final-score');
        const restartBtn = document.getElementById('restart-btn');
        const nextBtn = document.getElementById('next-btn');
        const nextButtonContainer = document.getElementById('next-button-container');

        // --- Quiz State ---
        let currentQuestionIndex = 0;
        let score = 0;
        const totalQuestions = quizData.length;

        // --- Functions ---

        /**
         * Starts or restarts the quiz.
         */
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            resultScreenEl.classList.add('hidden');
            questionArea.classList.remove('hidden');
            quizContainer.querySelector('.mb-6').classList.remove('hidden');
            updateScore();
            // Shuffle the quiz data array for a random order each time
            shuffleArray(quizData);
            displayQuestion();
        }

        /**
         * Shuffles array in place.
         * @param {Array} array items An array containing the items.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }


        /**
         * Displays the current question and its options.
         */
        function displayQuestion() {
            // Hide the next button when a new question is shown
            nextButtonContainer.classList.add('hidden');
            
            // Reset for the next question
            optionsContainerEl.innerHTML = '';
            questionArea.classList.remove('question-fade-in');
            void questionArea.offsetWidth; // Trigger reflow to restart animation
            questionArea.classList.add('question-fade-in');
            
            // Check if quiz is over
            if (currentQuestionIndex >= totalQuestions) {
                showResults();
                return;
            }

            // Update question number and progress bar
            questionNumberEl.textContent = currentQuestionIndex + 1;
            totalQuestionsEl.textContent = totalQuestions;
            const progressPercentage = ((currentQuestionIndex) / totalQuestions) * 100;
            progressBarEl.style.width = `${progressPercentage}%`;

            // Get current question data
            const currentQuestion = quizData[currentQuestionIndex];
            questionTextEl.textContent = currentQuestion.question;

            // Create and display option buttons
            currentQuestion.options.forEach(optionText => {
                const optionButton = document.createElement('button');
                optionButton.textContent = optionText;
                optionButton.classList.add('option', 'w-full', 'p-4', 'text-left', 'bg-white', 'border', 'border-gray-300', 'rounded-lg', 'hover:bg-indigo-50', 'hover:border-indigo-400', 'focus:outline-none', 'focus:ring-2', 'focus:ring-indigo-500');
                optionButton.addEventListener('click', () => handleOptionClick(optionButton, currentQuestion.answer));
                optionsContainerEl.appendChild(optionButton);
            });
        }

        /**
         * Handles the click event on an option.
         * @param {HTMLElement} selectedButton - The button element that was clicked.
         * @param {string} correctAnswer - The correct answer for the current question.
         */
        function handleOptionClick(selectedButton, correctAnswer) {
            // Disable all buttons to prevent multiple answers
            const allOptions = optionsContainerEl.querySelectorAll('.option');
            allOptions.forEach(btn => btn.disabled = true);

            const selectedAnswer = selectedButton.textContent;

            if (selectedAnswer === correctAnswer) {
                score++;
                selectedButton.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
                // Highlight the correct answer
                allOptions.forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }

            updateScore();

            // Reveal the 'Next' button
            nextButtonContainer.classList.remove('hidden');
        }

        /**
         * Updates the score display.
         */
        function updateScore() {
            scoreEl.textContent = `Score: ${score}`;
        }
        
        /**
         * Shows the final result screen.
         */
        function showResults() {
            questionArea.classList.add('hidden');
            quizContainer.querySelector('.mb-6').classList.add('hidden'); // Hide header
            resultScreenEl.classList.remove('hidden');
            finalScoreEl.textContent = `${score} / ${totalQuestions}`;
            progressBarEl.style.width = `100%`;
        }


        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', startQuiz);
        restartBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            displayQuestion();
        });
    </script>

</body>
</html>
